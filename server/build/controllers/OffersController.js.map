{"version":3,"sources":["../../src/controllers/OffersController.js"],"names":["db","require","mongoose","Offer","model","offer","addOffer","req","res","singleOffer","id","body","title","link","img","price","type","localization","date","position","lat","lng","save","err","console","error","sendStatus","getOffers","next","olxScrapes","get","value","json","module","exports"],"mappings":";;;;;;;;;;;;AAAA,IAAMA,KAAKC,QAAQ,WAAR,CAAX;AACA,IAAMC,WAAWD,QAAQ,UAAR,CAAjB;AACAA,QAAQ,iBAAR;;AAEA,IAAME,QAAQD,SAASE,KAAT,CAAe,QAAf,CAAd;;AAEA,IAAMC,QAAQ;AACZC,YAAU,kBAACC,GAAD,EAAMC,GAAN,EAAc;AACtB,QAAMC,cAAc,IAAIN,KAAJ,CAAU;AAC5BO,UAAIH,IAAII,IAAJ,CAASD,EADe;AAE5BE,aAAOL,IAAII,IAAJ,CAASC,KAFY;AAG5BC,YAAMN,IAAII,IAAJ,CAASE,IAHa;AAI5BC,WAAKP,IAAII,IAAJ,CAASG,GAJc;AAK5BC,aAAOR,IAAII,IAAJ,CAASI,KALY;AAM5BC,YAAMT,IAAII,IAAJ,CAASK,IANa;AAO5BC,oBAAcV,IAAII,IAAJ,CAASM,YAPK;AAQ5BC,YAAMX,IAAII,IAAJ,CAASO,IARa;AAS5BC,gBAAU;AACRC,aAAKb,IAAII,IAAJ,CAASQ,QAAT,CAAkBC,GADf;AAERC,aAAKd,IAAII,IAAJ,CAASQ,QAAT,CAAkBE;AAFf;AATkB,KAAV,CAApB;;AAeAZ,gBAAYa,IAAZ,CAAiB,UAASC,GAAT,EAAclB,KAAd,EAAqB;AACpC,UAAIkB,GAAJ,EAAS;AACPC,gBAAQC,KAAR,CAAcF,GAAd;AACA,eAAOf,IAAIkB,UAAJ,CAAe,GAAf,CAAP;AACD;AACD,aAAOlB,IAAIkB,UAAJ,CAAe,GAAf,CAAP;AACD,KAND;AAOD,GAxBW;AAyBZC;AAAA,wFAAW,iBAAOpB,GAAP,EAAYC,GAAZ,EAAiBoB,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AACT;AACMC,wBAFG,GAEU7B,GAAG8B,GAAH,CAAO,WAAP,EAAoBC,KAApB,EAFV;;AAIT;;AACAvB,kBAAIwB,IAAJ,CAASH,UAAT;;AALS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAX;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAzBY,CAAd;;AAkCAI,OAAOC,OAAP,GAAiB7B,KAAjB","file":"OffersController.js","sourcesContent":["const db = require(\"../lib/db\");\r\nconst mongoose = require(\"mongoose\");\r\nrequire(\"../models/Offer\");\r\n\r\nconst Offer = mongoose.model(\"Offers\");\r\n\r\nconst offer = {\r\n  addOffer: (req, res) => {\r\n    const singleOffer = new Offer({\r\n      id: req.body.id,\r\n      title: req.body.title,\r\n      link: req.body.link,\r\n      img: req.body.img,\r\n      price: req.body.price,\r\n      type: req.body.type,\r\n      localization: req.body.localization,\r\n      date: req.body.date,\r\n      position: {\r\n        lat: req.body.position.lat,\r\n        lng: req.body.position.lng\r\n      }\r\n    });\r\n\r\n    singleOffer.save(function(err, offer) {\r\n      if (err) {\r\n        console.error(err);\r\n        return res.sendStatus(500);\r\n      }\r\n      return res.sendStatus(201);\r\n    });\r\n  },\r\n  getOffers: async (req, res, next) => {\r\n    // Get the scrape data\r\n    const olxScrapes = db.get(\"olxScrape\").value();\r\n\r\n    // Respond with JSON\r\n    res.json(olxScrapes);\r\n  }\r\n};\r\n\r\nmodule.exports = offer;\r\n"]}